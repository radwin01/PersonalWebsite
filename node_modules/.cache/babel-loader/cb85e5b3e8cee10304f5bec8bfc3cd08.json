{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Positioner } from '../../positioner';\nimport PopoverStateless from './PopoverStateless';\n\nvar Popover = function (_Component) {\n  _inherits(Popover, _Component);\n\n  function Popover() {\n    _classCallCheck(this, Popover);\n\n    var _this = _possibleConstructorReturn(this, (Popover.__proto__ || Object.getPrototypeOf(Popover)).call(this));\n\n    _this.onBodyClick = function (e) {\n      // Ignore clicks on the popover or button\n      if (_this.targetNode === e.target) {\n        return;\n      }\n\n      if (_this.popoverNode && (_this.popoverNode === e.target || _this.popoverNode.contains(e.target))) {\n        return;\n      }\n\n      _this.close();\n    };\n\n    _this.onResize = function () {\n      _this.close();\n    };\n\n    _this.onEsc = function (e) {\n      // Esc key\n      if (e.keyCode === 27) {\n        _this.close();\n      }\n    };\n\n    _this.getRef = function (ref) {\n      _this.targetNode = ref;\n    };\n\n    _this.getTargetRect = function () {\n      return _this.targetNode.getBoundingClientRect();\n    };\n\n    _this.toggle = function () {\n      var isOpen = !_this.state.isOpen;\n\n      if (isOpen) {\n        _this.open();\n      } else {\n        _this.close();\n      }\n\n      _this.setState({\n        isOpen: isOpen\n      });\n    };\n\n    _this.open = function () {\n      if (_this.state.isOpen) {\n        return;\n      }\n\n      _this.setState({\n        isOpen: true,\n        targetRect: _this.getTargetRect()\n      });\n\n      document.body.addEventListener('click', _this.onBodyClick, false);\n      document.body.addEventListener('keydown', _this.onEsc, false);\n      window.addEventListener('resize', _this.onResize, false);\n\n      _this.props.onOpen();\n    };\n\n    _this.close = function () {\n      if (!_this.state.isOpen) {\n        return;\n      }\n\n      _this.setState({\n        isOpen: false\n      });\n\n      document.body.removeEventListener('click', _this.onBodyClick, false);\n      document.body.removeEventListener('keydown', _this.onEsc, false);\n      window.removeEventListener('resize', _this.resize, false);\n\n      _this.props.onClose();\n    };\n\n    _this.state = {\n      isOpen: false,\n      targetRect: {}\n    };\n    return _this;\n  }\n\n  _createClass(Popover, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (Object.prototype.hasOwnProperty.call(nextProps, 'isOpen')) {\n        if (nextProps.isOpen) {\n          this.setState({\n            targetRect: this.getTargetRect()\n          });\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      document.body.removeEventListener('click', this.onBodyClick, false);\n      document.body.removeEventListener('keydown', this.onEsc, false);\n      window.removeEventListener('resize', this.resize, false);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          zIndex = _props.zIndex,\n          isOpen = _props.isOpen,\n          content = _props.content,\n          display = _props.display,\n          children = _props.children,\n          minWidth = _props.minWidth,\n          minHeight = _props.minHeight,\n          statelessProps = _props.statelessProps,\n          props = _objectWithoutProperties(_props, ['zIndex', 'isOpen', 'content', 'display', 'children', 'minWidth', 'minHeight', 'statelessProps']);\n\n      var _state = this.state,\n          stateIsOpen = _state.isOpen,\n          targetRect = _state.targetRect;\n      var open = isOpen || stateIsOpen;\n      return [typeof children === 'function' ? children({\n        targetRect: targetRect,\n        toggle: this.toggle,\n        getRef: this.getRef,\n        isOpen: open,\n        key: 'popover-child'\n      }) : React.cloneElement(children, _extends({\n        onClick: function onClick() {\n          return _this2.toggle();\n        },\n        innerRef: function innerRef(ref) {\n          _this2.getRef(ref);\n        }\n      }, open ? {\n        'data-popover-opened': true\n      } : {}, {\n        key: 'popover-child'\n      })), React.createElement(Positioner, _extends({\n        key: 'popover-positioner',\n        targetRect: targetRect,\n        zIndex: zIndex,\n        isShown: open\n      }, props), function (_ref) {\n        var css = _ref.css,\n            style = _ref.style,\n            state = _ref.state,\n            getRef = _ref.getRef;\n        return React.createElement(PopoverStateless, _extends({\n          innerRef: function innerRef(ref) {\n            _this2.popoverNode = ref;\n            getRef(ref);\n          },\n          'data-state': state,\n          css: css,\n          style: style,\n          display: display,\n          minWidth: minWidth,\n          minHeight: minHeight\n        }, statelessProps), typeof content === 'function' ? content({\n          targetRect: targetRect,\n          close: _this2.close\n        }) : content);\n      })];\n    }\n  }]);\n\n  return Popover;\n}(Component);\n\nPopover.propTypes = _extends({}, Positioner.propTypes, {\n  onOpen: PropTypes.func.isRequired,\n  // Use isOpen to manually control the Popover\n  isOpen: PropTypes.bool,\n  onClose: PropTypes.func.isRequired,\n  content: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.func]).isRequired,\n  display: PropTypes.string,\n  minWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  minHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  statelessProps: PropTypes.objectOf(PopoverStateless.propTypes)\n});\nPopover.defaultProps = {\n  side: 'bottom',\n  onOpen: function onOpen() {},\n  onClose: function onClose() {},\n  minWidth: 200,\n  minHeight: 40\n};\nexport default Popover;","map":{"version":3,"sources":["../../../src/popover/src/Popover.js"],"names":["Popover","Component","propTypes","Positioner","onOpen","PropTypes","isRequired","isOpen","bool","onClose","content","children","display","string","minWidth","minHeight","statelessProps","PopoverStateless","defaultProps","side","targetRect","nextProps","Object","document","window","e","zIndex","props","stateIsOpen","open","toggle","getRef","key","onClick","innerRef","css","style","state","close"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Positioner } from '../../positioner'\nimport PopoverStateless from './PopoverStateless'\n\nexport default class Popover extends Component {\n  static propTypes = {\n    ...Positioner.propTypes,\n    onOpen: PropTypes.func.isRequired,\n    // Use isOpen to manually control the Popover\n    isOpen: PropTypes.bool,\n    onClose: PropTypes.func.isRequired,\n    content: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n    children: PropTypes.oneOfType([PropTypes.element, PropTypes.func])\n      .isRequired,\n    display: PropTypes.string,\n    minWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    minHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    statelessProps: PropTypes.objectOf(PopoverStateless.propTypes)\n  }\n\n  static defaultProps = {\n    side: 'bottom',\n    onOpen: () => {},\n    onClose: () => {},\n    minWidth: 200,\n    minHeight: 40\n  }\n\n  constructor() {\n    super()\n    this.state = {\n      isOpen: false,\n      targetRect: {}\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (Object.prototype.hasOwnProperty.call(nextProps, 'isOpen')) {\n      if (nextProps.isOpen) {\n        this.setState({\n          targetRect: this.getTargetRect()\n        })\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    document.body.removeEventListener('click', this.onBodyClick, false)\n    document.body.removeEventListener('keydown', this.onEsc, false)\n    window.removeEventListener('resize', this.resize, false)\n  }\n\n  onBodyClick = e => {\n    // Ignore clicks on the popover or button\n    if (this.targetNode === e.target) {\n      return\n    }\n\n    if (\n      this.popoverNode &&\n      (this.popoverNode === e.target || this.popoverNode.contains(e.target))\n    ) {\n      return\n    }\n\n    this.close()\n  }\n\n  onResize = () => {\n    this.close()\n  }\n\n  onEsc = e => {\n    // Esc key\n    if (e.keyCode === 27) {\n      this.close()\n    }\n  }\n\n  getRef = ref => {\n    this.targetNode = ref\n  }\n\n  getTargetRect = () => this.targetNode.getBoundingClientRect()\n\n  toggle = () => {\n    const isOpen = !this.state.isOpen\n\n    if (isOpen) {\n      this.open()\n    } else {\n      this.close()\n    }\n\n    this.setState({ isOpen })\n  }\n\n  open = () => {\n    if (this.state.isOpen) {\n      return\n    }\n\n    this.setState({ isOpen: true, targetRect: this.getTargetRect() })\n    document.body.addEventListener('click', this.onBodyClick, false)\n    document.body.addEventListener('keydown', this.onEsc, false)\n    window.addEventListener('resize', this.onResize, false)\n\n    this.props.onOpen()\n  }\n\n  close = () => {\n    if (!this.state.isOpen) {\n      return\n    }\n\n    this.setState({ isOpen: false })\n    document.body.removeEventListener('click', this.onBodyClick, false)\n    document.body.removeEventListener('keydown', this.onEsc, false)\n    window.removeEventListener('resize', this.resize, false)\n\n    this.props.onClose()\n  }\n\n  render() {\n    const {\n      zIndex,\n      isOpen,\n      content,\n      display,\n      children,\n      minWidth,\n      minHeight,\n      statelessProps,\n      ...props\n    } = this.props\n    const { isOpen: stateIsOpen, targetRect } = this.state\n\n    const open = isOpen || stateIsOpen\n\n    return [\n      typeof children === 'function'\n        ? children({\n            targetRect,\n            toggle: this.toggle,\n            getRef: this.getRef,\n            isOpen: open,\n            key: 'popover-child'\n          })\n        : React.cloneElement(children, {\n            onClick: () => this.toggle(),\n            innerRef: ref => {\n              this.getRef(ref)\n            },\n            ...(open ? { 'data-popover-opened': true } : {}),\n            key: 'popover-child'\n          }),\n\n      <Positioner\n        key=\"popover-positioner\"\n        targetRect={targetRect}\n        zIndex={zIndex}\n        isShown={open}\n        {...props}\n      >\n        {({ css, style, state, getRef }) => (\n          <PopoverStateless\n            innerRef={ref => {\n              this.popoverNode = ref\n              getRef(ref)\n            }}\n            data-state={state}\n            css={css}\n            style={style}\n            display={display}\n            minWidth={minWidth}\n            minHeight={minHeight}\n            {...statelessProps}\n          >\n            {typeof content === 'function'\n              ? content({ targetRect, close: this.close })\n              : content}\n          </PopoverStateless>\n        )}\n      </Positioner>\n    ]\n  }\n}\n"]},"metadata":{},"sourceType":"module"}