{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = StyleSheet;\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n} // This file is based off glamor's StyleSheet\n// https://github.com/threepointone/glamor/blob/v2.20.40/src/sheet.js\n\n\nvar isBrowser = typeof window !== 'undefined';\nvar isDev = process.env.NODE_ENV === 'development' || !process.env.NODE_ENV;\nvar isTest = process.env.NODE_ENV === 'test';\n\nfunction last(arr) {\n  return arr[arr.length - 1];\n}\n\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    return tag.sheet;\n  } // This weirdness brought to you by firefox\n\n\n  for (var i = 0; i < document.styleSheets.length; i += 1) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction makeStyleTag() {\n  var tag = document.createElement('style');\n  tag.type = 'text/css';\n  tag.setAttribute('data-ui-box', '');\n  tag.appendChild(document.createTextNode(''));\n  (document.head || document.getElementsByTagName('head')[0]).appendChild(tag);\n  return tag;\n}\n\nfunction StyleSheet() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$speedy = _ref.speedy,\n      speedy = _ref$speedy === undefined ? !isDev && !isTest : _ref$speedy,\n      _ref$maxLength = _ref.maxLength,\n      maxLength = _ref$maxLength === undefined ? 65000 : _ref$maxLength;\n\n  this.isSpeedy = speedy; // The big drawback here is that the css won't be editable in devtools\n\n  this.sheet = undefined;\n  this.tags = [];\n  this.maxLength = maxLength;\n  this.ctr = 0;\n}\n\nObject.assign(StyleSheet.prototype, {\n  getSheet: function getSheet() {\n    return sheetForTag(last(this.tags));\n  },\n  inject: function inject() {\n    var _this = this;\n\n    if (this.injected) {\n      throw new Error('StyleSheet has already been injected.');\n    }\n\n    if (isBrowser) {\n      this.tags[0] = makeStyleTag();\n    } else {\n      // Server side 'polyfill'. just enough behavior to be useful.\n      this.sheet = {\n        cssRules: [],\n        insertRule: function insertRule(rule) {\n          // Enough 'spec compliance' to be able to extract the rules later\n          // in other words, just the cssText field\n          _this.sheet.cssRules.push({\n            cssText: rule\n          });\n        }\n      };\n    }\n\n    this.injected = true;\n  },\n  speedy: function speedy(bool) {\n    if (this.ctr !== 0) {\n      throw new Error('StyleSheet cannot change speedy mode after inserting any rule to sheet. Either call speedy(' + bool + ') earlier in your app, or call flush() before speedy(' + bool + ')');\n    }\n\n    this.isSpeedy = Boolean(bool);\n  },\n  _insert: function _insert(rule) {\n    // This weirdness for perf\n    var sheet = this.getSheet();\n    sheet.insertRule(rule, sheet.cssRules.length);\n  },\n  insert: function insert(rule) {\n    if (isBrowser) {\n      // This is the ultrafast version, works across browsers\n      if (this.isSpeedy && this.getSheet().insertRule) {\n        this._insert(rule);\n      } else {\n        last(this.tags).appendChild(document.createTextNode(rule));\n      }\n    } else {\n      // Server side is pretty simple\n      this.sheet.insertRule(rule, this.sheet.cssRules.length);\n    }\n\n    this.ctr += 1;\n\n    if (isBrowser && this.ctr % this.maxLength === 0) {\n      this.tags.push(makeStyleTag());\n    }\n\n    return this.ctr - 1;\n  },\n  delete: function _delete(index) {\n    // We insert a blank rule when 'deleting' so previously returned indexes remain stable\n    return this.replace(index, '');\n  },\n  flush: function flush() {\n    if (isBrowser) {\n      this.tags.forEach(function (tag) {\n        return tag.parentNode.removeChild(tag);\n      });\n      this.tags = [];\n      this.sheet = null;\n      this.ctr = 0;\n    } else {\n      // Simpler on server\n      this.sheet.cssRules = [];\n    }\n\n    this.injected = false;\n  },\n  rules: function rules() {\n    if (!isBrowser) {\n      return this.sheet.cssRules;\n    }\n\n    var arr = [];\n    this.tags.forEach(function (tag) {\n      return arr.splice.apply(arr, [arr.length, 0].concat([].concat(_toConsumableArray(sheetForTag(tag).cssRules))));\n    });\n    return arr;\n  }\n});","map":{"version":3,"sources":["../../src/utils/style-sheet.js"],"names":["isBrowser","isDev","process","isTest","arr","tag","i","document","StyleSheet","speedy","maxLength","Object","getSheet","sheetForTag","last","inject","makeStyleTag","cssRules","insertRule","cssText","Boolean","_insert","sheet","insert","delete","flush","rules"],"mappings":"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","sourcesContent":["// This file is based off glamor's StyleSheet\n// https://github.com/threepointone/glamor/blob/v2.20.40/src/sheet.js\nconst isBrowser = typeof window !== 'undefined'\nconst isDev = process.env.NODE_ENV === 'development' || !process.env.NODE_ENV\nconst isTest = process.env.NODE_ENV === 'test'\n\nfunction last(arr) {\n  return arr[arr.length - 1]\n}\n\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    return tag.sheet\n  }\n\n  // This weirdness brought to you by firefox\n  for (let i = 0; i < document.styleSheets.length; i += 1) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      return document.styleSheets[i]\n    }\n  }\n}\n\nfunction makeStyleTag() {\n  const tag = document.createElement('style')\n  tag.type = 'text/css'\n  tag.setAttribute('data-ui-box', '')\n  tag.appendChild(document.createTextNode(''))\n  ;(document.head || document.getElementsByTagName('head')[0]).appendChild(tag)\n  return tag\n}\n\nexport default function StyleSheet({\n  speedy = !isDev && !isTest,\n  maxLength = 65000\n} = {}) {\n  this.isSpeedy = speedy // The big drawback here is that the css won't be editable in devtools\n  this.sheet = undefined\n  this.tags = []\n  this.maxLength = maxLength\n  this.ctr = 0\n}\n\nObject.assign(StyleSheet.prototype, {\n  getSheet() {\n    return sheetForTag(last(this.tags))\n  },\n  inject() {\n    if (this.injected) {\n      throw new Error('StyleSheet has already been injected.')\n    }\n    if (isBrowser) {\n      this.tags[0] = makeStyleTag()\n    } else {\n      // Server side 'polyfill'. just enough behavior to be useful.\n      this.sheet = {\n        cssRules: [],\n        insertRule: rule => {\n          // Enough 'spec compliance' to be able to extract the rules later\n          // in other words, just the cssText field\n          this.sheet.cssRules.push({cssText: rule})\n        }\n      }\n    }\n    this.injected = true\n  },\n  speedy(bool) {\n    if (this.ctr !== 0) {\n      throw new Error(\n        `StyleSheet cannot change speedy mode after inserting any rule to sheet. Either call speedy(${bool}) earlier in your app, or call flush() before speedy(${bool})`\n      )\n    }\n    this.isSpeedy = Boolean(bool)\n  },\n  _insert(rule) {\n    // This weirdness for perf\n    const sheet = this.getSheet()\n    sheet.insertRule(rule, sheet.cssRules.length)\n  },\n  insert(rule) {\n    if (isBrowser) {\n      // This is the ultrafast version, works across browsers\n      if (this.isSpeedy && this.getSheet().insertRule) {\n        this._insert(rule)\n      } else {\n        last(this.tags).appendChild(document.createTextNode(rule))\n      }\n    } else {\n      // Server side is pretty simple\n      this.sheet.insertRule(rule, this.sheet.cssRules.length)\n    }\n\n    this.ctr += 1\n    if (isBrowser && this.ctr % this.maxLength === 0) {\n      this.tags.push(makeStyleTag())\n    }\n    return this.ctr - 1\n  },\n  delete(index) {\n    // We insert a blank rule when 'deleting' so previously returned indexes remain stable\n    return this.replace(index, '')\n  },\n  flush() {\n    if (isBrowser) {\n      this.tags.forEach(tag => tag.parentNode.removeChild(tag))\n      this.tags = []\n      this.sheet = null\n      this.ctr = 0\n    } else {\n      // Simpler on server\n      this.sheet.cssRules = []\n    }\n    this.injected = false\n  },\n  rules() {\n    if (!isBrowser) {\n      return this.sheet.cssRules\n    }\n    const arr = []\n    this.tags.forEach(tag =>\n      arr.splice(arr.length, 0, ...[...sheetForTag(tag).cssRules])\n    )\n    return arr\n  }\n})\n"]},"metadata":{},"sourceType":"script"}