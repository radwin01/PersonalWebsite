{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from 'ui-box';\nimport { Image } from '../../image';\nimport { Text } from '../../typography';\nimport { FillAppearances } from '../../shared-styles';\nimport { colors } from '../../colors';\nimport globalGetInitials from './utils/getInitials';\nimport globalHash from './utils/hash';\nvar keysFillAppearances = Object.keys(FillAppearances.default);\nvar initialsProps = {\n  top: 0,\n  position: 'absolute',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  lineHeight: 1\n};\n\nvar getInitialsFontSize = function getInitialsFontSize(size, heightLimitOneCharacter) {\n  if (size <= heightLimitOneCharacter) {\n    return Math.ceil(size / 2.2);\n  }\n\n  return Math.ceil(size / 2.6);\n};\n\nvar Avatar = function (_PureComponent) {\n  _inherits(Avatar, _PureComponent);\n\n  function Avatar(props, context) {\n    _classCallCheck(this, Avatar);\n\n    var _this = _possibleConstructorReturn(this, (Avatar.__proto__ || Object.getPrototypeOf(Avatar)).call(this, props, context));\n\n    _this.handleError = function () {\n      _this.setState({\n        imageHasFailedLoading: true\n      });\n    };\n\n    _this.state = {\n      imageHasFailedLoading: false\n    };\n    return _this;\n  }\n\n  _createClass(Avatar, [{\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          src = _props.src,\n          size = _props.size,\n          name = _props.name,\n          hash = _props.hash,\n          isSolid = _props.isSolid,\n          propsHashValue = _props.hashValue,\n          getInitials = _props.getInitials,\n          useAutoColor = _props.useAutoColor,\n          propsAppearance = _props.appearance,\n          forceShowInitials = _props.forceShowInitials,\n          heightLimitOneCharacter = _props.heightLimitOneCharacter,\n          props = _objectWithoutProperties(_props, ['src', 'size', 'name', 'hash', 'isSolid', 'hashValue', 'getInitials', 'useAutoColor', 'appearance', 'forceShowInitials', 'heightLimitOneCharacter']);\n\n      var imageHasFailedLoading = this.state.imageHasFailedLoading;\n      var imageUnavailable = !src || imageHasFailedLoading;\n      var initialsFontSize = getInitialsFontSize(size, heightLimitOneCharacter) + 'px';\n      var initials = getInitials(name);\n\n      if (size <= heightLimitOneCharacter) {\n        initials = initials.substring(0, 1);\n      }\n\n      var hashValue = hash(propsHashValue || name);\n      var appearanceKey = propsAppearance;\n\n      if (appearanceKey === undefined) {\n        appearanceKey = keysFillAppearances[hashValue % keysFillAppearances.length];\n      }\n\n      var appearance = FillAppearances[isSolid ? 'solid' : 'default'][appearanceKey];\n      return React.createElement(Box, _extends({\n        width: size,\n        height: size,\n        overflow: 'hidden',\n        borderRadius: 9999,\n        position: 'relative',\n        display: 'inline-flex',\n        justifyContent: 'center',\n        backgroundColor: colors.neutral['300'],\n        title: name\n      }, appearance, props), (imageUnavailable || forceShowInitials) && React.createElement(Text, {\n        css: initialsProps,\n        fontSize: initialsFontSize,\n        lineHeight: initialsFontSize,\n        width: size,\n        height: size,\n        color: appearance.color\n      }, initials), !imageUnavailable && React.createElement(Image, {\n        width: 'auto',\n        height: '100%',\n        src: src,\n        onError: this.handleError\n      }));\n    }\n  }]);\n\n  return Avatar;\n}(PureComponent);\n\nAvatar.propTypes = _extends({}, Image.propTypes, {\n  size: PropTypes.number,\n  name: PropTypes.string,\n  // Hash value defaults to name\n  hashValue: PropTypes.string,\n  hash: PropTypes.func,\n  isSolid: PropTypes.bool,\n  appearance: PropTypes.oneOf(keysFillAppearances),\n  getInitials: PropTypes.func,\n  // In some cases Gravatar returns transparent pngs\n  // we still want to see the initials\n  forceShowInitials: PropTypes.bool,\n  heightLimitOneCharacter: PropTypes.number\n});\nAvatar.defaultProps = {\n  size: 24,\n  hash: globalHash,\n  isSolid: false,\n  getInitials: globalGetInitials,\n  forceShowInitials: false,\n  heightLimitOneCharacter: 20\n};\nexport default Avatar;","map":{"version":3,"sources":["../../../src/avatar/src/Avatar.js"],"names":["keysFillAppearances","Object","FillAppearances","initialsProps","top","position","display","alignItems","justifyContent","lineHeight","getInitialsFontSize","size","Math","Avatar","PureComponent","propTypes","Image","PropTypes","number","name","string","hashValue","hash","func","isSolid","bool","appearance","getInitials","forceShowInitials","heightLimitOneCharacter","defaultProps","imageHasFailedLoading","src","propsHashValue","useAutoColor","propsAppearance","props","imageUnavailable","initialsFontSize","initials","appearanceKey","colors","color","handleError"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAA,KAAA,IAAA,aAAA,QAAA,OAAA;AACA,OAAA,SAAA,MAAA,YAAA;AACA,OAAA,GAAA,MAAA,QAAA;AACA,SAAA,KAAA,QAAA,aAAA;AACA,SAAA,IAAA,QAAA,kBAAA;AACA,SAAA,eAAA,QAAA,qBAAA;AACA,SAAA,MAAA,QAAA,cAAA;AACA,OAAA,iBAAA,MAAA,qBAAA;AACA,OAAA,UAAA,MAAA,cAAA;AAEA,IAAMA,mBAAAA,GAAsBC,MAAAA,CAAAA,IAAAA,CAAYC,eAAAA,CAAxC,OAA4BD,CAA5B;AAEA,IAAME,aAAAA,GAAgB;AACpBC,EAAAA,GAAAA,EADoB,CAAA;AAEpBC,EAAAA,QAAAA,EAFoB,UAAA;AAGpBC,EAAAA,OAAAA,EAHoB,MAAA;AAIpBC,EAAAA,UAAAA,EAJoB,QAAA;AAKpBC,EAAAA,cAAAA,EALoB,QAAA;AAMpBC,EAAAA,UAAAA,EAAY;AANQ,CAAtB;;AASA,IAAMC,mBAAAA,GAAsB,SAAtBA,mBAAsB,CAAA,IAAA,EAAA,uBAAA,EAAmC;AAC7D,MAAIC,IAAAA,IAAJ,uBAAA,EAAqC;AACnC,WAAOC,IAAAA,CAAAA,IAAAA,CAAUD,IAAAA,GAAjB,GAAOC,CAAP;AACD;;AACD,SAAOA,IAAAA,CAAAA,IAAAA,CAAUD,IAAAA,GAAjB,GAAOC,CAAP;AAJF,CAAA;;IAOqBC,M;;;AA0BnB,WAAA,MAAA,CAAA,KAAA,EAAA,OAAA,EAA4B;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,MAAA,CAAA;;AAAA,QAAA,KAAA,GAAA,0BAAA,CAAA,IAAA,EAAA,CAAA,MAAA,CAAA,SAAA,IAAA,MAAA,CAAA,cAAA,CAAA,MAAA,CAAA,EAAA,IAAA,CAAA,IAAA,EAAA,KAAA,EAAA,OAAA,CAAA,CAAA;;AAAA,IAAA,KAAA,CAAA,WAAA,GAOd,YAAM;AAClB,MAAA,KAAA,CAAA,QAAA,CAAc;AACZkB,QAAAA,qBAAAA,EAAuB;AADX,OAAd;AAR0B,KAAA;;AAE1B,IAAA,KAAA,CAAA,KAAA,GAAa;AACXA,MAAAA,qBAAAA,EAAuB;AADZ,KAAb;AAF0B,WAAA,KAAA;AAK3B;;;;6BAQQ;AAAA,UAAA,MAAA,GAcH,KAdG,KAAA;AAAA,UAELC,GAFK,GAAA,MAAA,CAAA,GAAA;AAAA,UAGLrB,IAHK,GAAA,MAAA,CAAA,IAAA;AAAA,UAILQ,IAJK,GAAA,MAAA,CAAA,IAAA;AAAA,UAKLG,IALK,GAAA,MAAA,CAAA,IAAA;AAAA,UAMLE,OANK,GAAA,MAAA,CAAA,OAAA;AAAA,UAOMS,cAPN,GAAA,MAAA,CAAA,SAAA;AAAA,UAQLN,WARK,GAAA,MAAA,CAAA,WAAA;AAAA,UASLO,YATK,GAAA,MAAA,CAAA,YAAA;AAAA,UAUOC,eAVP,GAAA,MAAA,CAAA,UAAA;AAAA,UAWLP,iBAXK,GAAA,MAAA,CAAA,iBAAA;AAAA,UAYLC,uBAZK,GAAA,MAAA,CAAA,uBAAA;AAAA,UAaFO,KAbE,GAAA,wBAAA,CAAA,MAAA,EAAA,CAAA,KAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,SAAA,EAAA,WAAA,EAAA,aAAA,EAAA,cAAA,EAAA,YAAA,EAAA,mBAAA,EAAA,yBAAA,CAAA,CAAA;;AAAA,UAeCL,qBAfD,GAe2B,KAf3B,KAe2B,CAf3B,qBAAA;AAgBP,UAAMM,gBAAAA,GAAmB,CAAA,GAAA,IAAzB,qBAAA;AACA,UAAMC,gBAAAA,GAAsB5B,mBAAAA,CAAAA,IAAAA,EAAtB4B,uBAAsB5B,CAAAA,GAA5B,IAAA;AAKA,UAAI6B,QAAAA,GAAWZ,WAAAA,CAAf,IAAeA,CAAf;;AACA,UAAIhB,IAAAA,IAAJ,uBAAA,EAAqC;AACnC4B,QAAAA,QAAAA,GAAWA,QAAAA,CAAAA,SAAAA,CAAAA,CAAAA,EAAXA,CAAWA,CAAXA;AACD;;AAED,UAAMlB,SAAAA,GAAYC,IAAAA,CAAKW,cAAAA,IAAvB,IAAkBX,CAAlB;AACA,UAAIkB,aAAAA,GAAJ,eAAA;;AACA,UAAIA,aAAAA,KAAJ,SAAA,EAAiC;AAC/BA,QAAAA,aAAAA,GACExC,mBAAAA,CAAoBqB,SAAAA,GAAYrB,mBAAAA,CADlCwC,MACExC,CADFwC;AAED;;AAED,UAAMd,UAAAA,GACJxB,eAAAA,CAAgBsB,OAAAA,GAAAA,OAAAA,GAAhBtB,SAAAA,CAAAA,CADF,aACEA,CADF;AAGA,aACE,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA,QAAA,CAAA;AACE,QAAA,KAAA,EADF,IAAA;AAEE,QAAA,MAAA,EAFF,IAAA;AAGE,QAAA,QAAA,EAHF,QAAA;AAIE,QAAA,YAAA,EAJF,IAAA;AAKE,QAAA,QAAA,EALF,UAAA;AAME,QAAA,OAAA,EANF,aAAA;AAOE,QAAA,cAAA,EAPF,QAAA;AAQE,QAAA,eAAA,EAAiBuC,MAAAA,CAAAA,OAAAA,CARnB,KAQmBA,CARnB;AASE,QAAA,KAAA,EAAOtB;AATT,OAAA,EAAA,UAAA,EAAA,KAAA,CAAA,EAaG,CAACkB,gBAAAA,IAAD,iBAAA,KACC,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AACE,QAAA,GAAA,EADF,aAAA;AAEE,QAAA,QAAA,EAFF,gBAAA;AAGE,QAAA,UAAA,EAHF,gBAAA;AAIE,QAAA,KAAA,EAJF,IAAA;AAKE,QAAA,MAAA,EALF,IAAA;AAME,QAAA,KAAA,EAAOX,UAAAA,CAAWgB;AANpB,OAAA,EAQGH,QARH,CAdJ,EAyBG,CAAA,gBAAA,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,QAAA,KAAA,EADF,MAAA;AAEE,QAAA,MAAA,EAFF,MAAA;AAGE,QAAA,GAAA,EAHF,GAAA;AAIE,QAAA,OAAA,EAAS,KAAKI;AAJhB,OAAA,CA1BJ,CADF;AAoCD;;;;EAhHiC7B,a;;AAAfD,M,CACZE,SADYF,G,aAEdG,KAAAA,CAAMD,S;AACTJ,EAAAA,IAAAA,EAAMM,SAAAA,CAAUC,M;AAChBC,EAAAA,IAAAA,EAAMF,SAAAA,CAAUG,M;AAChB;AACAC,EAAAA,SAAAA,EAAWJ,SAAAA,CAAUG,M;AACrBE,EAAAA,IAAAA,EAAML,SAAAA,CAAUM,I;AAChBC,EAAAA,OAAAA,EAASP,SAAAA,CAAUQ,I;AACnBC,EAAAA,UAAAA,EAAYT,SAAAA,CAAAA,KAAAA,CAAAA,mBAAAA,C;AACZU,EAAAA,WAAAA,EAAaV,SAAAA,CAAUM,I;AACvB;AACA;AACAK,EAAAA,iBAAAA,EAAmBX,SAAAA,CAAUQ,I;AAC7BI,EAAAA,uBAAAA,EAAyBZ,SAAAA,CAAUC;EAdlBL;AAAAA,M,CAiBZiB,YAjBYjB,GAiBG;AACpBF,EAAAA,IAAAA,EADoB,EAAA;AAEpBW,EAAAA,IAAAA,EAFoB,UAAA;AAGpBE,EAAAA,OAAAA,EAHoB,KAAA;AAIpBG,EAAAA,WAAAA,EAJoB,iBAAA;AAKpBC,EAAAA,iBAAAA,EALoB,KAAA;AAMpBC,EAAAA,uBAAAA,EAAyB;AANL,CAjBHhB;eAAAA,M","sourcesContent":["import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport Box from 'ui-box'\nimport { Image } from '../../image'\nimport { Text } from '../../typography'\nimport { FillAppearances } from '../../shared-styles'\nimport { colors } from '../../colors'\nimport globalGetInitials from './utils/getInitials'\nimport globalHash from './utils/hash'\n\nconst keysFillAppearances = Object.keys(FillAppearances.default)\n\nconst initialsProps = {\n  top: 0,\n  position: 'absolute',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  lineHeight: 1\n}\n\nconst getInitialsFontSize = (size, heightLimitOneCharacter) => {\n  if (size <= heightLimitOneCharacter) {\n    return Math.ceil(size / 2.2)\n  }\n  return Math.ceil(size / 2.6)\n}\n\nexport default class Avatar extends PureComponent {\n  static propTypes = {\n    ...Image.propTypes,\n    size: PropTypes.number,\n    name: PropTypes.string,\n    // Hash value defaults to name\n    hashValue: PropTypes.string,\n    hash: PropTypes.func,\n    isSolid: PropTypes.bool,\n    appearance: PropTypes.oneOf(keysFillAppearances),\n    getInitials: PropTypes.func,\n    // In some cases Gravatar returns transparent pngs\n    // we still want to see the initials\n    forceShowInitials: PropTypes.bool,\n    heightLimitOneCharacter: PropTypes.number\n  }\n\n  static defaultProps = {\n    size: 24,\n    hash: globalHash,\n    isSolid: false,\n    getInitials: globalGetInitials,\n    forceShowInitials: false,\n    heightLimitOneCharacter: 20\n  }\n\n  constructor(props, context) {\n    super(props, context)\n    this.state = {\n      imageHasFailedLoading: false\n    }\n  }\n\n  handleError = () => {\n    this.setState({\n      imageHasFailedLoading: true\n    })\n  }\n\n  render() {\n    const {\n      src,\n      size,\n      name,\n      hash,\n      isSolid,\n      hashValue: propsHashValue,\n      getInitials,\n      useAutoColor,\n      appearance: propsAppearance,\n      forceShowInitials,\n      heightLimitOneCharacter,\n      ...props\n    } = this.props\n    const { imageHasFailedLoading } = this.state\n    const imageUnavailable = !src || imageHasFailedLoading\n    const initialsFontSize = `${getInitialsFontSize(\n      size,\n      heightLimitOneCharacter\n    )}px`\n\n    let initials = getInitials(name)\n    if (size <= heightLimitOneCharacter) {\n      initials = initials.substring(0, 1)\n    }\n\n    const hashValue = hash(propsHashValue || name)\n    let appearanceKey = propsAppearance\n    if (appearanceKey === undefined) {\n      appearanceKey =\n        keysFillAppearances[hashValue % keysFillAppearances.length]\n    }\n\n    const appearance =\n      FillAppearances[isSolid ? 'solid' : 'default'][appearanceKey]\n\n    return (\n      <Box\n        width={size}\n        height={size}\n        overflow=\"hidden\"\n        borderRadius={9999}\n        position=\"relative\"\n        display=\"inline-flex\"\n        justifyContent=\"center\"\n        backgroundColor={colors.neutral['300']}\n        title={name}\n        {...appearance}\n        {...props}\n      >\n        {(imageUnavailable || forceShowInitials) && (\n          <Text\n            css={initialsProps}\n            fontSize={initialsFontSize}\n            lineHeight={initialsFontSize}\n            width={size}\n            height={size}\n            color={appearance.color}\n          >\n            {initials}\n          </Text>\n        )}\n        {!imageUnavailable && (\n          <Image\n            width=\"auto\"\n            height=\"100%\"\n            src={src}\n            onError={this.handleError}\n          />\n        )}\n      </Box>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}