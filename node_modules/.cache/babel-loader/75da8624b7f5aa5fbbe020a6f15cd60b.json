{"ast":null,"code":"var _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport objectValues from 'object-values';\nimport Transition from 'react-transition-group/Transition';\nimport { Portal } from '../../portal';\nvar PositionerSides = {\n  BOTTOM: 'bottom',\n  TOP: 'top'\n};\nvar animationEasing = {\n  spring: 'cubic-bezier(0.175, 0.885, 0.320, 1.175)'\n};\n\nvar initialState = function initialState() {\n  return {\n    top: null,\n    left: null,\n    side: null,\n    transformOriginX: null\n  };\n};\n\nvar getCSS = function getCSS(_ref) {\n  var targetOffset = _ref.targetOffset,\n      initialScale = _ref.initialScale,\n      animationDuration = _ref.animationDuration;\n  return {\n    position: 'absolute',\n    opacity: 0,\n    transition: 'all ' + animationDuration + 'ms ' + animationEasing.spring,\n    transform: 'scale(' + initialScale + ') translateY(-1px)',\n    '&[data-state=\"entering\"][data-position=\"bottom\"], &[data-state=\"entered\"][data-position=\"bottom\"]': {\n      opacity: 1,\n      visibility: 'visible',\n      transform: 'scale(1) translateY(' + targetOffset + 'px)'\n    },\n    '&[data-state=\"entering\"][data-position=\"top\"], &[data-state=\"entered\"][data-position=\"top\"]': {\n      opacity: 1,\n      visibility: 'visible',\n      transform: 'scale(1) translateY(-' + targetOffset + 'px)'\n    },\n    '&[data-state=\"exiting\"]': {\n      opacity: 0,\n      transform: 'scale(1) translateY(0)'\n    }\n  };\n};\n\nvar Positioner = function (_PureComponent) {\n  _inherits(Positioner, _PureComponent);\n\n  function Positioner(props, context) {\n    _classCallCheck(this, Positioner);\n\n    var _this = _possibleConstructorReturn(this, (Positioner.__proto__ || Object.getPrototypeOf(Positioner)).call(this, props, context));\n\n    _this.getAnchors = function () {\n      var targetRect = _this.props.targetRect;\n      var bodyRect = document.body.getBoundingClientRect();\n      var x = targetRect.left + targetRect.width / 2;\n      return {\n        top: {\n          x: x,\n          y: targetRect.top - bodyRect.top\n        },\n        bottom: {\n          x: x,\n          y: targetRect.bottom - bodyRect.top\n        }\n      };\n    };\n\n    _this.getRef = function (ref) {\n      _this.positionerRef = ref;\n\n      _this.props.innerRef(ref);\n    };\n\n    _this.handleEnter = function () {\n      var _this$props = _this.props,\n          useSmartPositioning = _this$props.useSmartPositioning,\n          bodyOffset = _this$props.bodyOffset;\n\n      var _this$getAnchors = _this.getAnchors(),\n          top = _this$getAnchors.top,\n          bottom = _this$getAnchors.bottom;\n\n      var side = _this.props.side; // Smartly position the positioner when it overflows the body\n\n      var viewportHeight = document.documentElement.clientHeight + window.scrollY;\n      var viewportWidth = document.documentElement.clientWidth + window.scrollX;\n\n      if (useSmartPositioning && _this.positionerRef.offsetHeight + bottom.y > viewportHeight) {\n        side = 'top';\n      }\n\n      _this.positionerRef.setAttribute('data-position', side);\n\n      var left = Math.max(bottom.x - _this.positionerRef.offsetWidth / 2, bodyOffset);\n      left = Math.min(left, viewportWidth - _this.positionerRef.offsetWidth - bodyOffset);\n      var transformOriginX = bottom.x - left;\n      transformOriginX = Math.max(transformOriginX - bodyOffset, bottom.x - left);\n\n      _this.setState({\n        left: left,\n        side: side,\n        transformOriginX: transformOriginX,\n        top: side === PositionerSides.BOTTOM ? bottom.y : top.y - _this.positionerRef.offsetHeight\n      });\n    };\n\n    _this.handleExited = function () {\n      _this.setState(initialState());\n    };\n\n    _this.state = initialState();\n    return _this;\n  }\n\n  _createClass(Positioner, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          children = _props.children,\n          zIndex = _props.zIndex,\n          isShown = _props.isShown,\n          targetRect = _props.targetRect,\n          initialScale = _props.initialScale,\n          targetOffset = _props.targetOffset,\n          animationDuration = _props.animationDuration;\n      var _state = this.state,\n          left = _state.left,\n          top = _state.top,\n          side = _state.side,\n          transformOriginX = _state.transformOriginX;\n      var transformOrigin = transformOriginX + 'px ' + (side === PositionerSides.BOTTOM ? 'top' : 'bottom');\n      return React.createElement(Portal, null, React.createElement(Transition, {\n        'in': isShown,\n        timeout: animationDuration,\n        onEnter: this.handleEnter,\n        onExited: this.handleExited,\n        unmountOnExit: true\n      }, function (state) {\n        return children({\n          top: top,\n          left: left,\n          side: side,\n          state: state,\n          zIndex: zIndex,\n          css: getCSS({\n            targetOffset: targetOffset,\n            initialScale: initialScale,\n            animationDuration: animationDuration\n          }),\n          style: {\n            left: left,\n            top: top,\n            transformOrigin: transformOrigin,\n            zIndex: zIndex\n          },\n          getRef: _this2.getRef,\n          targetRect: targetRect,\n          transformOrigin: transformOrigin,\n          animationDuration: animationDuration\n        });\n      }));\n    }\n  }]);\n\n  return Positioner;\n}(PureComponent);\n\nPositioner.propTypes = {\n  side: PropTypes.oneOf(objectValues(PositionerSides)),\n  zIndex: PropTypes.number,\n  isShown: PropTypes.bool,\n  children: PropTypes.func,\n  innerRef: PropTypes.func,\n  bodyOffset: PropTypes.number,\n  targetRect: PropTypes.object,\n  targetOffset: PropTypes.number,\n  initialScale: PropTypes.number,\n  animationDuration: PropTypes.number,\n  useSmartPositioning: PropTypes.bool\n};\nPositioner.defaultProps = {\n  innerRef: function innerRef() {},\n  side: PositionerSides.BOTTOM,\n  zIndex: 40,\n  bodyOffset: 4,\n  targetOffset: 8,\n  initialScale: 0.9,\n  animationDuration: 300,\n  useSmartPositioning: true\n};\nexport default Positioner;","map":{"version":3,"sources":["../../../src/positioner/src/Positioner.js"],"names":["PositionerSides","BOTTOM","TOP","animationEasing","spring","initialState","top","left","side","transformOriginX","getCSS","targetOffset","initialScale","animationDuration","position","opacity","transition","transform","visibility","Positioner","PureComponent","propTypes","PropTypes","objectValues","zIndex","isShown","children","innerRef","bodyOffset","targetRect","useSmartPositioning","bool","defaultProps","bodyRect","document","x","y","bottom","viewportHeight","window","viewportWidth","Math","offsetHeight","transformOrigin","state","css","style","getRef"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport objectValues from 'object-values'\nimport Transition from 'react-transition-group/Transition'\nimport { Portal } from '../../portal'\n\nconst PositionerSides = {\n  BOTTOM: 'bottom',\n  TOP: 'top'\n}\n\nconst animationEasing = {\n  spring: `cubic-bezier(0.175, 0.885, 0.320, 1.175)`\n}\n\nconst initialState = () => ({\n  top: null,\n  left: null,\n  side: null,\n  transformOriginX: null\n})\n\nconst getCSS = ({ targetOffset, initialScale, animationDuration }) => ({\n  position: 'absolute',\n  opacity: 0,\n  transition: `all ${animationDuration}ms ${animationEasing.spring}`,\n  transform: `scale(${initialScale}) translateY(-1px)`,\n  '&[data-state=\"entering\"][data-position=\"bottom\"], &[data-state=\"entered\"][data-position=\"bottom\"]': {\n    opacity: 1,\n    visibility: 'visible',\n    transform: `scale(1) translateY(${targetOffset}px)`\n  },\n  '&[data-state=\"entering\"][data-position=\"top\"], &[data-state=\"entered\"][data-position=\"top\"]': {\n    opacity: 1,\n    visibility: 'visible',\n    transform: `scale(1) translateY(-${targetOffset}px)`\n  },\n  '&[data-state=\"exiting\"]': {\n    opacity: 0,\n    transform: 'scale(1) translateY(0)'\n  }\n})\n\nexport default class Positioner extends PureComponent {\n  static propTypes = {\n    side: PropTypes.oneOf(objectValues(PositionerSides)),\n    zIndex: PropTypes.number,\n    isShown: PropTypes.bool,\n    children: PropTypes.func,\n    innerRef: PropTypes.func,\n    bodyOffset: PropTypes.number,\n    targetRect: PropTypes.object,\n    targetOffset: PropTypes.number,\n    initialScale: PropTypes.number,\n    animationDuration: PropTypes.number,\n    useSmartPositioning: PropTypes.bool\n  }\n\n  static defaultProps = {\n    innerRef: () => {},\n    side: PositionerSides.BOTTOM,\n    zIndex: 40,\n    bodyOffset: 4,\n    targetOffset: 8,\n    initialScale: 0.9,\n    animationDuration: 300,\n    useSmartPositioning: true\n  }\n\n  constructor(props, context) {\n    super(props, context)\n    this.state = initialState()\n  }\n\n  getAnchors = () => {\n    const { targetRect } = this.props\n    const bodyRect = document.body.getBoundingClientRect()\n    const x = targetRect.left + targetRect.width / 2\n    return {\n      top: {\n        x,\n        y: targetRect.top - bodyRect.top\n      },\n      bottom: {\n        x,\n        y: targetRect.bottom - bodyRect.top\n      }\n    }\n  }\n\n  getRef = ref => {\n    this.positionerRef = ref\n    this.props.innerRef(ref)\n  }\n\n  handleEnter = () => {\n    const { useSmartPositioning, bodyOffset } = this.props\n    const { top, bottom } = this.getAnchors()\n    let side = this.props.side\n\n    // Smartly position the positioner when it overflows the body\n    const viewportHeight =\n      document.documentElement.clientHeight + window.scrollY\n    const viewportWidth = document.documentElement.clientWidth + window.scrollX\n\n    if (\n      useSmartPositioning &&\n      this.positionerRef.offsetHeight + bottom.y > viewportHeight\n    ) {\n      side = 'top'\n    }\n\n    this.positionerRef.setAttribute('data-position', side)\n\n    let left = Math.max(\n      bottom.x - this.positionerRef.offsetWidth / 2,\n      bodyOffset\n    )\n    left = Math.min(\n      left,\n      viewportWidth - this.positionerRef.offsetWidth - bodyOffset\n    )\n\n    let transformOriginX = bottom.x - left\n    transformOriginX = Math.max(transformOriginX - bodyOffset, bottom.x - left)\n\n    this.setState({\n      left,\n      side,\n      transformOriginX,\n      top:\n        side === PositionerSides.BOTTOM\n          ? bottom.y\n          : top.y - this.positionerRef.offsetHeight\n    })\n  }\n\n  handleExited = () => {\n    this.setState(initialState())\n  }\n\n  render() {\n    const {\n      children,\n      zIndex,\n      isShown,\n      targetRect,\n      initialScale,\n      targetOffset,\n      animationDuration\n    } = this.props\n\n    const { left, top, side, transformOriginX } = this.state\n\n    const transformOrigin = `${transformOriginX}px ${\n      side === PositionerSides.BOTTOM ? 'top' : 'bottom'\n    }`\n\n    return (\n      <Portal>\n        <Transition\n          in={isShown}\n          timeout={animationDuration}\n          onEnter={this.handleEnter}\n          onExited={this.handleExited}\n          unmountOnExit\n        >\n          {state =>\n            children({\n              top,\n              left,\n              side,\n              state,\n              zIndex,\n              css: getCSS({ targetOffset, initialScale, animationDuration }),\n              style: {\n                left,\n                top,\n                transformOrigin,\n                zIndex\n              },\n              getRef: this.getRef,\n              targetRect,\n              transformOrigin,\n              animationDuration\n            })\n          }\n        </Transition>\n      </Portal>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}