{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { IconButton } from '../../buttons';\nimport { Pane } from '../../layers';\nimport { Heading } from '../../typography';\nimport OptionsList from './OptionsList';\nimport OptionShapePropType from './OptionShapePropType';\n\nvar SelectMenuContent = function (_PureComponent) {\n  _inherits(SelectMenuContent, _PureComponent);\n\n  function SelectMenuContent(props, context) {\n    _classCallCheck(this, SelectMenuContent);\n\n    var _this = _possibleConstructorReturn(this, (SelectMenuContent.__proto__ || Object.getPrototypeOf(SelectMenuContent)).call(this, props, context));\n\n    _this.handleKeyUp = function (e) {\n      if (e.keyCode === 38) {\n        _this.handleArrowUp();\n      }\n\n      if (e.keyCode === 40) {\n        _this.handleArrowDown();\n      }\n\n      if (e.keyCode === 13) {\n        _this.handleEnter();\n      }\n    };\n\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(SelectMenuContent, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      window.addEventListener('keyup', this.handleKeyUp);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      window.removeEventListener('keyup', this.handleKeyUp);\n    }\n  }, {\n    key: 'getCurrentIndex',\n    value: function getCurrentIndex() {\n      var _props = this.props,\n          options = _props.options,\n          listProps = _props.listProps;\n      var selected = listProps.selected;\n      return options.findIndex(function (option) {\n        return option.value === selected[0];\n      });\n    }\n  }, {\n    key: 'handleArrowUp',\n    value: function handleArrowUp() {\n      var _props2 = this.props,\n          options = _props2.options,\n          listProps = _props2.listProps;\n      var onSelect = listProps.onSelect;\n      var nextIndex = this.getCurrentIndex() - 1;\n\n      if (nextIndex < 0) {\n        nextIndex = options.length - 1;\n      }\n\n      onSelect(options[nextIndex]);\n    }\n  }, {\n    key: 'handleArrowDown',\n    value: function handleArrowDown() {\n      var _props3 = this.props,\n          options = _props3.options,\n          listProps = _props3.listProps;\n      var onSelect = listProps.onSelect;\n      var nextIndex = this.getCurrentIndex() + 1;\n\n      if (nextIndex === options.length) {\n        nextIndex = 0;\n      }\n\n      onSelect(options[nextIndex]);\n    }\n  }, {\n    key: 'handleEnter',\n    value: function handleEnter() {\n      var isSelected = this.getCurrentIndex() === -1;\n\n      if (isSelected) {\n        this.props.close();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props4 = this.props,\n          width = _props4.width,\n          height = _props4.height,\n          options = _props4.options,\n          hasTitle = _props4.hasTitle,\n          hasFilter = _props4.hasFilter,\n          close = _props4.close,\n          title = _props4.title,\n          listProps = _props4.listProps;\n      var headerHeight = 40;\n      var optionsListHeight = hasTitle ? height - headerHeight : height;\n      return React.createElement(Pane, {\n        width: width,\n        height: height,\n        display: 'flex',\n        flexDirection: 'column'\n      }, hasTitle && React.createElement(Pane, {\n        display: 'flex',\n        alignItems: 'center',\n        borderBottom: 'muted',\n        padding: 8,\n        height: headerHeight,\n        boxSizing: 'border-box'\n      }, React.createElement(Pane, {\n        flex: '1'\n      }, React.createElement(Heading, {\n        size: 400\n      }, title)), React.createElement(IconButton, {\n        icon: 'close',\n        appearance: 'ghost',\n        height: 24,\n        onClick: close\n      })), React.createElement(OptionsList, _extends({\n        height: optionsListHeight,\n        hasFilter: hasFilter,\n        options: options\n      }, listProps)));\n    }\n  }]);\n\n  return SelectMenuContent;\n}(PureComponent);\n\nSelectMenuContent.propTypes = {\n  close: PropTypes.func,\n  title: PropTypes.string,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  options: PropTypes.arrayOf(OptionShapePropType),\n  hasTitle: PropTypes.bool,\n  hasFilter: PropTypes.bool,\n  listProps: PropTypes.shape(OptionsList.propTypes)\n};\nSelectMenuContent.defaultProps = {\n  options: [],\n  hasTitle: true,\n  hasFilter: true\n};\nexport default SelectMenuContent;","map":{"version":3,"sources":["../../../src/select-menu/src/SelectMenuContent.js"],"names":["SelectMenuContent","PureComponent","propTypes","close","PropTypes","title","width","height","options","hasTitle","hasFilter","listProps","OptionsList","defaultProps","window","e","selected","option","onSelect","nextIndex","isSelected","headerHeight","optionsListHeight"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport { IconButton } from '../../buttons'\nimport { Pane } from '../../layers'\nimport { Heading } from '../../typography'\nimport OptionsList from './OptionsList'\nimport OptionShapePropType from './OptionShapePropType'\n\nexport default class SelectMenuContent extends PureComponent {\n  static propTypes = {\n    close: PropTypes.func,\n    title: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    options: PropTypes.arrayOf(OptionShapePropType),\n    hasTitle: PropTypes.bool,\n    hasFilter: PropTypes.bool,\n    listProps: PropTypes.shape(OptionsList.propTypes)\n  }\n\n  static defaultProps = {\n    options: [],\n    hasTitle: true,\n    hasFilter: true\n  }\n\n  constructor(props, context) {\n    super(props, context)\n\n    this.state = {}\n  }\n\n  componentDidMount() {\n    window.addEventListener('keyup', this.handleKeyUp)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keyup', this.handleKeyUp)\n  }\n\n  handleKeyUp = e => {\n    if (e.keyCode === 38) {\n      this.handleArrowUp()\n    }\n\n    if (e.keyCode === 40) {\n      this.handleArrowDown()\n    }\n\n    if (e.keyCode === 13) {\n      this.handleEnter()\n    }\n  }\n\n  getCurrentIndex() {\n    const { options, listProps } = this.props\n    const { selected } = listProps\n\n    return options.findIndex(option => option.value === selected[0])\n  }\n\n  handleArrowUp() {\n    const { options, listProps } = this.props\n    const { onSelect } = listProps\n\n    let nextIndex = this.getCurrentIndex() - 1\n\n    if (nextIndex < 0) {\n      nextIndex = options.length - 1\n    }\n\n    onSelect(options[nextIndex])\n  }\n\n  handleArrowDown() {\n    const { options, listProps } = this.props\n    const { onSelect } = listProps\n\n    let nextIndex = this.getCurrentIndex() + 1\n\n    if (nextIndex === options.length) {\n      nextIndex = 0\n    }\n\n    onSelect(options[nextIndex])\n  }\n\n  handleEnter() {\n    const isSelected = this.getCurrentIndex() === -1\n\n    if (isSelected) {\n      this.props.close()\n    }\n  }\n\n  render() {\n    const {\n      width,\n      height,\n      options,\n      hasTitle,\n      hasFilter,\n      close,\n      title,\n      listProps\n    } = this.props\n\n    const headerHeight = 40\n    const optionsListHeight = hasTitle ? height - headerHeight : height\n\n    return (\n      <Pane width={width} height={height} display=\"flex\" flexDirection=\"column\">\n        {hasTitle && (\n          <Pane\n            display=\"flex\"\n            alignItems=\"center\"\n            borderBottom=\"muted\"\n            padding={8}\n            height={headerHeight}\n            boxSizing=\"border-box\"\n          >\n            <Pane flex=\"1\">\n              <Heading size={400}>{title}</Heading>\n            </Pane>\n            <IconButton\n              icon=\"close\"\n              appearance=\"ghost\"\n              height={24}\n              onClick={close}\n            />\n          </Pane>\n        )}\n        <OptionsList\n          height={optionsListHeight}\n          hasFilter={hasFilter}\n          options={options}\n          {...listProps}\n        />\n      </Pane>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}